<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Estimating Ground Distances and Heights using Projective Geometry in Monocular Camera Images | You R. Name </title> <meta name="author" content="You R. Name"> <meta name="description" content="Estimating ground distances and heights from monocular camera images using projective geometry principles, including homography, vanishing points, and cross-ratio, without explicit camera calibration."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://veetil314.github.io/projects/4_project/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">You</span> R. Name </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/projects/">projects</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Estimating Ground Distances and Heights using Projective Geometry in Monocular Camera Images</h1> <p class="post-description">Estimating ground distances and heights from monocular camera images using projective geometry principles, including homography, vanishing points, and cross-ratio, without explicit camera calibration.</p> </header> <article> <p>#</p> <h2 id="introduction">Introduction</h2> <p>Calculating ground distances and heights from monocular camera images can be challenging due to the lack of depth information. However, by leveraging the principles of projective geometry, we can estimate these measurements without the need for explicit camera calibration or statistical methods. This article explores the use of homography, vanishing points, and the cross-ratio to determine ground distances and heights in images, with a focus on applications such as social distancing monitoring.</p> <h2 id="homography-and-ground-plane">Homography and Ground Plane</h2> <p>Homography is a transformation matrix that aids in projecting points from one plane to another. In the context of ground distance estimation, we ideally obtain four reference points on the ground plane with known distances. These points can be used to calibrate ground distances and calculate a desired distance guideline, such as a 6-foot social distancing radius. By transforming pixel coordinates on the image plane to real-world coordinates relative to the reference points, we can verify the distance between any two points in physical space.</p> <h2 id="projective-geometry-invariant-ratios">Projective Geometry Invariant Ratios</h2> <p>In cases where reference points with known distances are not available, we can rely on projective geometry invariant ratios to measure distances. This approach allows us to estimate distances without performing camera calibration or employing statistical methods. The key components required for distance estimation are the homography transformation matrix and a scale factor for converting pixel measurements to real-world distances.</p> <h2 id="vanishing-points-and-horizon-line">Vanishing Points and Horizon Line</h2> <p>According to the principles of projective geometry, parallel lines in the real world converge to a point called the vanishing point, which is considered to be at infinity. In an image, we can identify vanishing points for different sets of parallel lines, such as V1 and V2 in Figure 1. These vanishing points lie on a line called the horizon line or vanishing line.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vanish2-480.webp 480w,/assets/img/vanish2-800.webp 800w,/assets/img/vanish2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vanish2.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Vanishing points from different groups of parallel lines form the vanishing line </div> <p>The horizon line possesses an important property: it is located at the same height as the camera’s focal point. This means that the horizon line provides us with the exact height of the camera, without the need for explicit calibration methods.</p> <h2 id="cross-ratio">Cross-Ratio</h2> <p>The cross-ratio is a numerical invariant of an ordered 4-tuple of points on a line or four points from concurrent lines in a plane. It plays a crucial role in projective geometry because it remains constant under projective transformations. In other words, if we have four points on a line, the ratio between them remains the same, regardless of the point ordering, as illustrated in Figure 2.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vanish1-480.webp 480w,/assets/img/vanish1-800.webp 800w,/assets/img/vanish1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vanish1.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 2. Cross-ratio of four points on a line </div> <p>The cross-ratio is particularly useful for height estimation in the image plane. By understanding the cross-ratio and the ability to compute lengths from image measurements using projective geometry properties, we can calculate real heights from vanishing points and lines.</p> <h2 id="height-estimation-procedure">Height Estimation Procedure</h2> <p>Given the horizon line, the vertical vanishing point, and one reference height, we can compute the height of any point (from the ground plane) by specifying the point and its projection on the ground plane in the image. The procedure, as illustrated in Figure 3, involves the following steps:</p> <ol> <li>Draw a line from the base of the reference object to the horizon line, passing through the base of the object to be measured.</li> <li>Draw another line from the intersection of the horizon line and the previous line to the reference object, passing through the top of the object to be measured.</li> <li>The junction of the previous line with the reference object will provide the point that determines the segment d₂.</li> <li>Compute the height using the formula shown in Figure 3, where d₁ and d₂ are distances in pixels.</li> </ol> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vanish3-480.webp 480w,/assets/img/vanish3-800.webp 800w,/assets/img/vanish3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vanish3.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Measuring heights using cross ratio </div> <h2 id="implementation-for-social-distancing">Implementation for Social Distancing</h2> <p>To estimate the ground 6-foot distance for social distancing, we can utilize a combination of properties. First, we identify natural properties of objects in the image to draw four points corresponding to a rectangle on the ground plane, such as using parallel lines like road boundaries.</p> <p>Next, we draw the vanishing line using various lines on the ground plane. The cross-ratio is employed to verify people’s heights as they appear in the image. The height of an object can be calculated using vanishing points Vx, Vy, and Vz. We assume that the Vz vanishing point is not infinite and can be determined using the human head-to-bottom measurement. The Vx and Vy vanishing points are calculated using opposite parallel lines in the homography rectangle in the image plane.</p> <p>After drawing the horizon line, we locate the intersection point (vertex) of the line passing through the bottom points of the people we want to measure with the horizon line. Then, we draw a line passing through the vertex and the top of a known reference object, intersecting with the line passing through the top and bottom of an unknown object. This determines the intersection point, referred to as the reference object.</p> <p>Using the cross-ratio method, we can calculate the height, assuming average heights of 5.3 feet for women and 5.8 feet for men. If reference heights are available, such as electric posts or buildings, they can be used, provided they are consistent with the vanishing line derived from the homography reference rectangle. If there is a discrepancy, the reference rectangle is adjusted.</p> <p>To ensure the accuracy of the height estimation, we can use the homography points as a validation measure. If the homography points are taken incorrectly, the estimated height will deviate from the expected range by more than 10%, prompting an adjustment of the points.</p> <h2 id="conclusion">Conclusion</h2> <p>By leveraging the principles of projective geometry, such as homography, vanishing points, and the cross-ratio, we can estimate ground distances and heights from monocular camera images without the need for explicit camera calibration. This approach has practical applications, such as monitoring social distancing compliance using a 6-foot guideline.</p> <p>The procedure involves identifying vanishing points, drawing the horizon line, and utilizing the cross-ratio to calculate heights based on reference objects or assumed average heights. While the accuracy of the estimation depends on the correct selection of homography points and consistent vanishing lines, this method provides a valuable tool for extracting meaningful distance and height information from monocular camera images.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 You R. Name. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?5d75c11f89cd96294bf5e6dd1ee1bb30"></script> <script defer src="/assets/js/common.js?fcfacfb8c6281f5e68d5a7d348186eb1"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>